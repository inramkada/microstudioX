<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>microstudioX</title>

  <meta name="referrer" content="no-referrer" />
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />
  <meta name="color-scheme" content="dark" />

  <meta property="og:type" content="website">
  <meta property="og:title" content="microstudioX">
  <meta property="og:description" content="Creative technology studio. Vanilla. Haskell.">
  <meta property="og:url" content="https://www.microstudiox.com">
  <meta property="og:image" content="https://www.microstudiox.com/og-image.jpg">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="microstudioX">
  <meta name="twitter:description" content="Creative technology studio. Vanilla. Haskell.">
  <meta name="twitter:image" content="https://www.microstudiox.com/og-image.jpg">

  <style>
    :root{
      --bg:#000;
      --fg:rgba(255,255,255,.94);
      --muted:rgba(255,255,255,.62);
      --hair:rgba(255,255,255,.12);
      --glass:rgba(0,0,0,.78);

      --px:clamp(12px, 2vw, 18px);
      --py:10px;

      --brand-size:clamp(18px, 1.8vw, 22px);
      --brand-track:0.22em;

      --nav-size:clamp(14px, 1.5vw, 17px);
      --nav-track:0.22em;

      --copy-size:clamp(6.5px, 1.1vw, 7px);
      --copy-track:0.06em;

      --radius:14px;
      --blur:10px;

      --menu-bg: rgba(0,0,0,.86);
      --menu-border: rgba(255,255,255,.14);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      text-rendering: geometricPrecision;
      font-weight:400;
      transition: opacity 0.18s ease-in-out;
    }
    body.is-i18n-switching{ opacity:0.92; }

    .page{
      min-height:100%;
      display:grid;
      grid-template-rows:auto 1fr auto;
      isolation:isolate;
    }

    .page::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.045;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(255,255,255,.07), transparent 46%),
        radial-gradient(circle at 80% 70%, rgba(255,255,255,.05), transparent 44%),
        repeating-linear-gradient(0deg, rgba(255,255,255,.025), rgba(255,255,255,.025) 1px, transparent 1px, transparent 3px);
      mix-blend-mode:screen;
      z-index:-1;
    }

    header, footer{
      background:var(--glass);
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      overflow: visible;
    }

    header{
      padding: var(--py) var(--px);
      border-bottom: 1px solid var(--hair);
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      mix-blend-mode:difference;
    }

    .brand{
      font-size: var(--brand-size);
      font-weight: 700;
      letter-spacing: var(--brand-track);
      text-transform: uppercase;
      white-space: nowrap;
      line-height: 1;
      opacity:.97;
      text-shadow: 0 0 10px rgba(255,255,255,.10), 0 0 2px rgba(255,255,255,.18);
    }

    nav{
      display:flex;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }

    .navlink{
      color:rgba(255,255,255,.82);
      text-decoration:none;
      font-size:var(--nav-size);
      font-weight:700;
      letter-spacing:var(--nav-track);
      text-transform:uppercase;
      padding:5px 2px;
      position:relative;
    }
    .navlink:hover{ color:rgba(255,255,255,.96); }
    .navlink::after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:0;
      height:1px;
      background:rgba(255,255,255,.22);
      transform:scaleX(0);
      transform-origin:left;
      transition:transform 150ms ease;
    }
    .navlink:hover::after{ transform:scaleX(1); }

    .services{
      position:relative;
      display:inline-flex;
      align-items:center;
      cursor:pointer;
    }
    .services > span{ pointer-events:none; }

    .services-menu{
      position:absolute;
      top:100%;
      left:0;
      margin-top:10px;

      display:flex;
      flex-direction:column;
      gap:10px;

      padding:0;
      padding-top:2px;
      border:0;
      background:transparent;
      border-radius:0;

      opacity:0;
      pointer-events:none;
      transform: translateY(6px);
      transition: opacity 160ms ease, transform 160ms ease;

      white-space:nowrap;
      z-index:50;
    }

    .services-menu .v-item:first-child{ margin-top:2px; }

    .services.is-open .services-menu{
      opacity:1;
      pointer-events:auto;
      transform: translateY(0);
    }

    .v-item{
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      text-decoration:none;
      padding:2px 0;
    }

    .v-main{
      color:rgba(255,255,255,.92);
      font-size:12px;
      font-weight:400;
      letter-spacing:.14em;
      text-transform:uppercase;
      line-height:1.05;
    }

    .v-sub{
      margin-top:3px;
      color:rgba(255,255,255,.55);
      font-size:10px;
      font-weight:400;
      letter-spacing:.18em;
      text-transform:uppercase;
      line-height:1.05;
    }

    .v-item:hover .v-main{ color:#fff; }
    .v-item:hover .v-sub{ color:rgba(255,255,255,.72); }

    .lang-switch{
      position:relative;
      display:flex;
      align-items:center;
    }

    .lang-trigger{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:28px;
      height:28px;
      background:none;
      border:0;
      cursor:pointer;
      padding:0;
      color:#fff;
      line-height:1;
      border-radius:10px;
      -webkit-user-select:none;
      user-select:none;
    }
    .lang-trigger:hover{ background: rgba(255,255,255,.06); }
    .lang-trigger:focus{ outline:none; }
    .globe{ width:18px; height:18px; display:block; }

    .lang-rail{
      --rail-shift: 0px;

      position:absolute;
      right: calc(100% + 10px);
      top: 50%;
      transform: translateY(-50%) translateX(var(--rail-shift));

      display:flex;
      align-items:center;
      gap:8px;

      padding:6px 8px;
      border:1px solid var(--menu-border);
      background: var(--menu-bg);
      border-radius: 999px;

      max-width: min(780px, calc(100vw - (2 * var(--px)) - 80px));
      overflow-x: auto;
      overflow-y: hidden;
      white-space: nowrap;

      direction:ltr;
      unicode-bidi:isolate;

      opacity:0;
      pointer-events:none;

      filter: drop-shadow(0 10px 24px rgba(0,0,0,.45));
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);

      transition: opacity 0.4s ease, transform 0.2s ease;

      touch-action: pan-x;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior-x: contain;
    }

    .lang-rail::-webkit-scrollbar{ height:0; }
    .lang-rail{ scrollbar-width:none; -ms-overflow-style:none; }

    .lang-switch.is-open .lang-rail{
      opacity:1;
      pointer-events:auto;
    }

    .lang-switch.open-right .lang-rail{
      right:auto;
      left: calc(100% + 10px);
    }

    [dir="rtl"] .lang-switch.open-right .lang-rail{
      left:auto;
      right: calc(100% + 10px);
    }

    .lang-pill{
      position:relative;
      display:inline-flex;
      align-items:center;
      justify-content:center;

      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.30);
      color: rgba(255,255,255,.86);

      height:26px;
      padding: 0 10px;
      border-radius: 999px;

      font-size: 11px;
      font-weight: 400;
      letter-spacing: .12em;
      text-transform: uppercase;

      cursor:pointer;
      user-select:none;

      transform: translateX(10px);
      opacity: 0;
      transition: transform 220ms ease, opacity 220ms ease, background 160ms ease, border-color 160ms ease, color 160ms ease;
      -webkit-tap-highlight-color: transparent;
    }

    .lang-pill:focus{ outline:none; }
    .lang-pill[hidden]{ display:none !important; }

    .lang-switch.is-open .lang-pill{
      transform: translateX(0);
      opacity: 1;
    }

    .lang-switch.is-open .lang-pill:nth-child(1)  { transition-delay:  0ms; }
    .lang-switch.is-open .lang-pill:nth-child(2)  { transition-delay: 18ms; }
    .lang-switch.is-open .lang-pill:nth-child(3)  { transition-delay: 36ms; }
    .lang-switch.is-open .lang-pill:nth-child(4)  { transition-delay: 54ms; }
    .lang-switch.is-open .lang-pill:nth-child(5)  { transition-delay: 72ms; }
    .lang-switch.is-open .lang-pill:nth-child(6)  { transition-delay: 90ms; }
    .lang-switch.is-open .lang-pill:nth-child(7)  { transition-delay:108ms; }
    .lang-switch.is-open .lang-pill:nth-child(8)  { transition-delay:126ms; }
    .lang-switch.is-open .lang-pill:nth-child(9)  { transition-delay:144ms; }

    .lang-pill:hover{
      color:#fff;
      border-color: rgba(255,255,255,.22);
      background: rgba(255,255,255,.06);
    }

    .lang-pill::after{
      content: attr(data-label);
      position:absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);

      background: rgba(0,0,0,.90);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 10px;
      padding: 6px 8px;

      font-size: 10px;
      font-weight: 400;
      letter-spacing: .06em;
      text-transform: uppercase;
      color: rgba(255,255,255,.92);

      opacity:0;
      pointer-events:none;
      white-space: nowrap;

      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .lang-pill:hover::after{ opacity:1; }

    main{
      display:grid;
      place-items:center;
      padding:22px var(--px);
    }

    .card{
      width:min(720px,100%);
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius);
      background:rgba(0,0,0,.55);
      padding:clamp(16px,2.5vw,24px);
      font-weight:400;
      text-align:center;
    }

    footer{
      padding:10px var(--px) 12px;
      border-top:1px solid var(--hair);
    }

    .footer-inner{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
    }

    .footer-links{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      font-size:10.5px;
      font-weight:400;
      letter-spacing:.16em;
      text-transform:uppercase;
      opacity:.75;
      align-items:center;
    }

    .footer-links a{
      color:rgba(255,255,255,.85);
      text-decoration:none;
    }
    .footer-links a:hover{ color:#fff; }

    .copyright{
      font-size:var(--copy-size);
      letter-spacing:var(--copy-track);
      opacity:.58;
      text-align:center;
      line-height:1.3;
      font-weight:400;
    }

    .cookie-gear{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:22px;
      height:22px;
      margin-left:6px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.25);
      cursor:pointer;
      position:relative;
      vertical-align:middle;
    }
    .cookie-gear:hover{
      border-color: rgba(255,255,255,.20);
      background: rgba(255,255,255,.05);
    }
    .cookie-gear svg{
      width:14px;
      height:14px;
      display:block;
      color: rgba(255,255,255,.88);
    }
    .cookie-gear::after{
      content: attr(data-tip);
      position:absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,.90);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 10px;
      padding: 6px 8px;
      font-size: 10px;
      font-weight: 400;
      letter-spacing: .06em;
      text-transform: uppercase;
      color: rgba(255,255,255,.92);
      opacity:0;
      pointer-events:none;
      white-space: nowrap;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .cookie-gear:hover::after{ opacity:1; }

    [data-i18n]{
      display:inline-block;
      transition: opacity 160ms ease, transform 160ms ease, filter 160ms ease;
      will-change: opacity, transform, filter;
    }
    [data-i18n].mx-i18n-out{
      opacity:0;
      transform: translateY(2px);
      filter: blur(1px);
    }
    [data-i18n].mx-i18n-in{
      opacity:1;
      transform: translateY(0);
      filter: blur(0);
    }

    [dir="rtl"] .topbar{ flex-direction:row-reverse; }
    [dir="rtl"] nav{ flex-direction:row-reverse; }
    [dir="rtl"] .navlink::after{ transform-origin:right; }
    [dir="rtl"] .footer-links{ flex-direction:row-reverse; }

    [dir="rtl"] .services-menu{
      left:auto;
      right:0;
      align-items:flex-end;
      text-align:right;
    }
    [dir="rtl"] .v-item{ align-items:flex-end; }

    @media (max-width: 640px){
      .topbar{
        flex-direction:column;
        align-items:flex-start;
        gap:8px;
      }
      nav{ width:100%; gap:10px; }

      .lang-rail{
        right:auto;
        left:0;
        top:100%;
        transform: translateY(10px) translateX(var(--rail-shift));
        max-width: min(92vw, 520px);
      }

      [dir="rtl"] .lang-rail{
        left:auto;
        right:0;
      }
    }

    html[dir="rtl"], body{ overflow-x: hidden; }
    [dir="rtl"] .page{ overflow-x: clip; }

    body.mx-consent-locked{
      overflow:hidden;
      touch-action:none;
    }

    body.mx-consent-locked #app-root{
      pointer-events:none;
      user-select:none;
      -webkit-user-select:none;
    }

    .mx-cmp{
      position:fixed;
      inset:0;
      z-index:9999;
      display:none;
      align-items:center;
      justify-content:center;
      padding: max(14px, env(safe-area-inset-top)) max(14px, env(safe-area-inset-right))
               max(14px, env(safe-area-inset-bottom)) max(14px, env(safe-area-inset-left));
      background: rgba(0,0,0,.78);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .mx-cmp.is-open{ display:flex; }

    .mx-cmp-panel{
      width:min(560px, 100%);
      border:1px solid rgba(255,255,255,.14);
      border-radius: 16px;
      background: rgba(0,0,0,.88);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      overflow:hidden;
    }

    .mx-cmp-head{
      padding: 14px 16px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }

    .mx-cmp-title{
      margin:0;
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      opacity:.92;
      line-height:1.25;
    }

    .mx-cmp-sub{
      margin:10px 0 0;
      font-size:11px;
      letter-spacing:.02em;
      line-height:1.35;
      color:rgba(255,255,255,.70);
    }

    .mx-cmp-body{
      padding: 12px 16px 14px;
      display:grid;
      gap:10px;
    }

    .mx-cmp-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding: 10px 12px;
      border:1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      background: rgba(255,255,255,.03);
    }

    .mx-cmp-row strong{
      display:block;
      font-size:11px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:rgba(255,255,255,.90);
    }

    .mx-cmp-row p{
      margin:6px 0 0;
      font-size:11px;
      color:rgba(255,255,255,.65);
      line-height:1.35;
    }

    .mx-switch{
      width:44px;
      height:24px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.35);
      position:relative;
      cursor:pointer;
      flex:0 0 auto;
      padding:0;
    }

    .mx-switch::after{
      content:"";
      position:absolute;
      top:50%;
      left:3px;
      width:18px;
      height:18px;
      transform: translateY(-50%);
      border-radius: 999px;
      background: rgba(255,255,255,.78);
      transition: left 150ms ease, opacity 150ms ease;
      opacity:.92;
    }

    .mx-switch[data-on="1"]{
      background: rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.22);
    }

    .mx-switch[data-on="1"]::after{ left:23px; }

    .mx-switch[aria-disabled="true"]{
      cursor:not-allowed;
      opacity:.55;
    }

    .mx-cmp-actions{
      display:flex;
      gap:10px;
      justify-content:flex-end;
      padding: 12px 16px 14px;
      border-top:1px solid rgba(255,255,255,.10);
      flex-wrap:wrap;
    }

    .mx-btn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.88);
      border-radius: 999px;
      padding: 10px 14px;
      font-size: 11px;
      letter-spacing:.16em;
      text-transform:uppercase;
      cursor:pointer;
      line-height:1;
      -webkit-tap-highlight-color: transparent;
    }

    .mx-btn:hover{
      border-color: rgba(255,255,255,.22);
      background: rgba(255,255,255,.07);
      color:#fff;
    }

    .mx-btn.primary{
      background: rgba(255,255,255,.10);
      border-color: rgba(255,255,255,.22);
    }

    .mx-btn.primary:hover{
      background: rgba(255,255,255,.14);
      border-color: rgba(255,255,255,.28);
    }

    @media (max-width: 560px){
      .mx-cmp-actions{ justify-content:stretch; }
      .mx-btn{ flex:1 1 auto; text-align:center; }
      .mx-cmp-row{ flex-direction:column; align-items:flex-start; }
    }
    /* ── Video Background ── */
    #mx-video-bg{
      position:fixed;
      inset:0;
      z-index:-2;
      pointer-events:none;
      overflow:hidden;
    }

    #mx-video-bg video{
      position:absolute;
      top:50%; left:50%;
      transform: translate(-50%, -50%);
      width:100%; height:100%;
      object-fit:contain;
      object-position:center center;
      opacity:0;
      transition: opacity 1.4s ease;
    }

    /* clip masks for the 3 thirds */
    #mx-video-bg.show-center video {
      clip-path: inset(0 33.33% 0 33.33%);
      opacity:1;
    }
    #mx-video-bg.show-left video {
      clip-path: inset(0 66.66% 0 0);
      opacity:1;
    }
    #mx-video-bg.show-right video {
      clip-path: inset(0 0 0 66.66%);
      opacity:1;
    }

    #mx-video-bg video::before{ content:none; }

    /* dark overlay so text stays readable */
    #mx-video-bg::after{
      content:"";
      position:absolute;
      inset:0;
      background: rgba(0,0,0,.52);
      pointer-events:none;
    }

  </style>
</head>

<body>
  <!-- Video background -->
  <div id="mx-video-bg">
    <video id="mx-bg-video" src="https://www.microstudiox.com/assets/video1.mp4"
           muted playsinline preload="auto" aria-hidden="true"></video>
  </div>

  <div class="page" id="app-root">
    <header id="mx-header">
      <div class="topbar">
        <div class="brand">microstudio<span style="text-transform:uppercase">X</span></div>

        <nav>
          <div class="lang-switch" id="lang-switch">
            <button class="lang-trigger" aria-label="Language selector" type="button">
              <svg class="globe" viewBox="0 0 24 24" aria-hidden="true">
                <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="1.7"/>
                <path d="M3 12h18" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
                <path d="M12 3c3 3 3 15 0 18" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
                <path d="M12 3c-3 3-3 15 0 18" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
              </svg>
            </button>

            <div class="lang-rail" id="lang-rail" aria-label="Languages">
              <button class="lang-pill" data-lang="en" data-label="English" type="button">EN</button>
              <button class="lang-pill" data-lang="es" data-label="Español" type="button">ES</button>
              <button class="lang-pill" data-lang="ca" data-label="Català" type="button">CA</button>
              <button class="lang-pill" data-lang="eu" data-label="Euskara" type="button">EU</button>
              <button class="lang-pill" data-lang="zh" data-label="中文 (Chinese)" type="button">ZH</button>
              <button class="lang-pill" data-lang="hi" data-label="हिंदी (Hindi)" type="button">HI</button>
              <button class="lang-pill" data-lang="ar" data-label="العربية (Arabic)" type="button">AR</button>
              <button class="lang-pill" data-lang="ru" data-label="Русский" type="button">RU</button>
              <button class="lang-pill" data-lang="fr" data-label="Français" type="button">FR</button>
            </div>
          </div>

          <a class="navlink" href="#/about" data-i18n="nav.about">About</a>

          <div class="navlink services" id="services" role="button" aria-haspopup="true" aria-expanded="false">
            <span data-i18n="nav.services">Services</span>
            <div class="services-menu" aria-label="Services">
              <a class="v-item" href="https://www.microstudiox.com">
                <span class="v-main">DIGITAL PLATFORMS</span>
                <span class="v-sub">WEB DESIGN</span>
              </a>
              <a class="v-item" href="https://www.microstudiox.com">
                <span class="v-main">AI DRIVEN MEDIA</span>
                <span class="v-sub">MODELS</span>
              </a>
                <a class="v-item" href="https://www.microstudiox.com">
                <span class="v-main">DIGITAL ID SYSTEMS</span>
                <span class="v-sub">VECTOR TRACK</span>
              </a>
            </div>
          </div>

          <a class="navlink" href="/cdn-cgi/l/email-protection#3a53545c557a5753594855485f4e5b53564214595557" data-i18n="nav.contact">Contact</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="card">
        <p data-i18n="card.test">We’re working on it — coming back soon.</p>
      </section>
    </main>

    <footer>
      <div class="footer-inner">
        <div class="footer-links">
          <a href="terms.html" data-i18n="footer.terms">Terms</a>
          <a href="privacy.html" data-i18n="footer.privacy">Privacy</a>

          <span style="display:inline-flex; align-items:center;">
            <a href="cookies.html" data-i18n="footer.cookies">Cookies</a>
            <button
              type="button"
              class="cookie-gear"
              id="cookiePreferencesGear"
              aria-label="Cookie Preferences"
              data-tip="Cookie Preferences"
            >
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.4.12-.61l-1.92-3.32c-.11-.2-.36-.28-.57-.2l-2.39.96c-.5-.38-1.04-.7-1.64-.94l-.36-2.54A.49.49 0 0 0 13.9 1h-3.8c-.24 0-.44.17-.48.41l-.36 2.54c-.6.24-1.14.56-1.64.94l-2.39-.96c-.21-.08-.46 0-.57.2L1.74 7.45c-.11.21-.06.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.4-.12.61l1.92 3.32c.11.2.36.28.57.2l2.39-.96c.5.38 1.04.7 1.64.94l.36 2.54c.04.24.24.41.48.41h3.8c.24 0 .44-.17.48-.41l.36-2.54c.6-.24 1.14-.56 1.64-.94l2.39.96c.21.08.46 0 .57-.2l1.92-3.32c.11-.2.06-.47-.12-.61l-2.03-1.58zM12 15.2A3.2 3.2 0 1 1 12 8.8a3.2 3.2 0 0 1 0 6.4z"/>
              </svg>
            </button>
          </span>

          <a href="legal.html" data-i18n="footer.legal">Legal</a>
        </div>

        <div class="copyright">
          © 2025 microstudioX — MICRORETAILX LLC
        </div>
      </div>
    </footer>
  </div>

  <div class="mx-cmp" id="mx-cmp" role="dialog" aria-modal="true" aria-labelledby="mx-cmp-title">
    <div class="mx-cmp-panel">
      <div class="mx-cmp-head">
        <h2 class="mx-cmp-title" id="mx-cmp-title" data-i18n="cmp.title">Privacy & Cookies</h2>
        <p class="mx-cmp-sub" id="mx-cmp-desc" data-i18n="cmp.desc">We respect your privacy. This site does not use advertising or tracking cookies. Necessary cookies are always on for security and basic functionality. You can accept or reject optional cookies.</p>
      </div>

      <div class="mx-cmp-body">
        <div class="mx-cmp-row">
          <div>
            <strong data-i18n="cmp.necessary">Necessary</strong>
            <p data-i18n="cmp.necessary.desc">Security & core functionality.</p>
          </div>
          <div>
            <div class="mx-switch" id="mx-tg-necessary" data-on="1" aria-disabled="true" aria-label="Necessary cookies"></div>
          </div>
        </div>

        <div class="mx-cmp-row">
          <div>
            <strong data-i18n="cmp.analytics">Analytics</strong>
            <p data-i18n="cmp.analytics.desc">Optional, anonymous usage insights to improve the site.</p>
          </div>
          <div>
            <button class="mx-switch" id="mx-tg-analytics" type="button" data-on="0" aria-label="Analytics cookies"></button>
          </div>
        </div>

        <div class="mx-cmp-row">
          <div>
            <strong data-i18n="cmp.marketing">Marketing</strong>
            <p data-i18n="cmp.marketing.desc">Optional personalization and campaign measurement.</p>
          </div>
          <div>
            <button class="mx-switch" id="mx-tg-marketing" type="button" data-on="0" aria-label="Marketing cookies"></button>
          </div>
        </div>
      </div>

      <div class="mx-cmp-actions">
        <button class="mx-btn" id="mx-btn-reject" type="button" data-i18n="cmp.reject">Reject all</button>
        <button class="mx-btn primary" id="mx-btn-accept" type="button" data-i18n="cmp.accept">Accept all</button>
        <button class="mx-btn" id="mx-btn-save" type="button" data-i18n="cmp.save">Save preferences</button>
      </div>
    </div>
  </div>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    (function(){
      const CONSENT_KEY = "mx_consent";
      const CMP_VER = 1;

      const cmpEl = document.getElementById("mx-cmp");
      const appRoot = document.getElementById("app-root");

      const tgAnalytics = document.getElementById("mx-tg-analytics");
      const tgMarketing = document.getElementById("mx-tg-marketing");

      const btnAccept = document.getElementById("mx-btn-accept");
      const btnReject = document.getElementById("mx-btn-reject");
      const btnSave   = document.getElementById("mx-btn-save");

      function safeParse(json){
        try{ return JSON.parse(json); } catch(_){ return null; }
      }

      function readConsent(){
        const v = localStorage.getItem(CONSENT_KEY);
        const obj = safeParse(v);
        if (!obj || typeof obj !== "object") return null;
        if (obj.v !== CMP_VER) return null;
        if (!obj.choices || typeof obj.choices !== "object") return null;
        return obj;
      }

      function writeConsent(choices){
        const payload = {
          v: CMP_VER,
          ts: Date.now(),
          choices: {
            necessary: true,
            analytics: !!choices.analytics,
            marketing: !!choices.marketing
          }
        };
        localStorage.setItem(CONSENT_KEY, JSON.stringify(payload));
        return payload;
      }

      function isDecided(){ return !!readConsent(); }

      function lockUI(){
        document.body.classList.add("mx-consent-locked");
        if (appRoot) appRoot.setAttribute("aria-hidden", "true");
      }

      function unlockUI(){
        document.body.classList.remove("mx-consent-locked");
        if (appRoot) appRoot.removeAttribute("aria-hidden");
      }

      function setToggle(btn, on){
        if (!btn) return;
        btn.setAttribute("data-on", on ? "1" : "0");
      }

      function getToggle(btn){
        if (!btn) return 0;
        return btn.getAttribute("data-on") === "1" ? 1 : 0;
      }

      function toggle(btn){
        const on = getToggle(btn);
        setToggle(btn, on ? 0 : 1);
      }

      function openCMP(forceLock){
        if (!cmpEl) return;

        const existing = readConsent();
        setToggle(tgAnalytics, existing?.choices?.analytics ? 1 : 0);
        setToggle(tgMarketing, existing?.choices?.marketing ? 1 : 0);

        cmpEl.classList.add("is-open");
        if (forceLock) lockUI();
        else unlockUI();
      }

      function closeCMP(){
        if (!cmpEl) return;
        cmpEl.classList.remove("is-open");
        unlockUI();
      }

      function acceptAll(){
        writeConsent({ analytics:true, marketing:true });
        closeCMP();
      }

      function rejectAll(){
        writeConsent({ analytics:false, marketing:false });
        closeCMP();
      }

      function savePrefs(){
        writeConsent({
          analytics: !!getToggle(tgAnalytics),
          marketing: !!getToggle(tgMarketing)
        });
        closeCMP();
      }

      tgAnalytics?.addEventListener("click", (e) => { e.preventDefault(); toggle(tgAnalytics); });
      tgMarketing?.addEventListener("click", (e) => { e.preventDefault(); toggle(tgMarketing); });

      btnAccept?.addEventListener("click", (e) => { e.preventDefault(); acceptAll(); });
      btnReject?.addEventListener("click", (e) => { e.preventDefault(); rejectAll(); });
      btnSave?.addEventListener("click", (e) => { e.preventDefault(); savePrefs(); });

      const gear = document.getElementById("cookiePreferencesGear");
      gear?.addEventListener("click", (e) => {
        e.preventDefault();
        openCMP(false);
      });

      document.addEventListener("keydown", (e) => {
        if (e.key !== "Escape") return;
        if (!isDecided() && cmpEl?.classList.contains("is-open")) return;
        if (cmpEl?.classList.contains("is-open")) closeCMP();
      });

      window.__mxConsent = {
        isDecided,
        getConsent: () => readConsent(),
        open: () => openCMP(false),
        openLocked: () => openCMP(true),
        acceptAll,
        rejectAll,
        savePrefs,
        reset: () => { localStorage.removeItem(CONSENT_KEY); openCMP(true); }
      };

      if (!isDecided()){
        openCMP(true);
      }
    })();

    (function(){
      const I18N = {
        en: {
          "nav.about": "About",
          "nav.services": "Services",
          "nav.verticals": "Verticals",
          "nav.contact": "Contact",
          "footer.terms": "Terms",
          "footer.privacy": "Privacy",
          "footer.cookies": "Cookies",
          "footer.legal": "Legal",
          "card.test": "We’re working on it — coming back soon.",
          "cookie.prefs": "Cookie Preferences",
          "cmp.title": "Privacy & Cookies",
          "cmp.desc": "We respect your privacy. This site does not use advertising or tracking cookies. Necessary cookies are always on for security and basic functionality. You can accept or reject optional cookies.",
          "cmp.necessary": "Necessary",
          "cmp.necessary.desc": "Security & core functionality.",
          "cmp.analytics": "Analytics",
          "cmp.analytics.desc": "Optional, anonymous usage insights to improve the site.",
          "cmp.marketing": "Marketing",
          "cmp.marketing.desc": "Optional personalization and campaign measurement.",
          "cmp.reject": "Reject all",
          "cmp.accept": "Accept all",
          "cmp.save": "Save preferences"
        },
        zh: {
          "nav.about": "关于",
          "nav.verticals": "领域",
          "nav.contact": "联系",
          "footer.terms": "条款",
          "footer.privacy": "隐私",
          "footer.cookies": "Cookies",
          "footer.legal": "法律",
          "card.test": "我们正在建设中，敬请期待。",
          "cookie.prefs": "Cookie 偏好设置",
          "cmp.title": "隐私与 Cookies",
          "cmp.desc": "我们尊重您的隐私。本网站不使用广告或追踪 Cookies。为安全与基本功能所必需的 Cookies 始终启用。您可以接受或拒绝可选 Cookies。",
          "cmp.necessary": "必要",
          "cmp.necessary.desc": "安全与基本功能。",
          "cmp.analytics": "分析",
          "cmp.analytics.desc": "可选：匿名使用数据，用于改进网站。",
          "cmp.marketing": "营销",
          "cmp.marketing.desc": "可选：个性化与活动效果衡量。",
          "cmp.reject": "全部拒绝",
          "cmp.accept": "全部接受",
          "cmp.save": "保存偏好"
        },
        es: {
          "nav.about": "Info",
          "nav.verticals": "Verticales",
          "nav.contact": "Contacto",
          "footer.terms": "Términos",
          "footer.privacy": "Privacidad",
          "footer.cookies": "Cookies",
          "footer.legal": "Legal",
          "card.test": "Estamos trabajando — volvemos pronto.",
          "cookie.prefs": "Preferencias de cookies",
          "cmp.title": "Privacidad y cookies",
          "cmp.desc": "Respetamos su privacidad. Este sitio no utiliza cookies publicitarias ni de seguimiento. Las cookies necesarias siempre están activas por seguridad y funcionamiento básico. Puede aceptar o rechazar cookies opcionales.",
          "cmp.necessary": "Necesarias",
          "cmp.necessary.desc": "Seguridad y funcionamiento básico.",
          "cmp.analytics": "Analítica",
          "cmp.analytics.desc": "Opcional: métricas anónimas para mejorar el sitio.",
          "cmp.marketing": "Marketing",
          "cmp.marketing.desc": "Opcional: personalización y medición de campañas.",
          "cmp.reject": "Rechazar todo",
          "cmp.accept": "Aceptar todo",
          "cmp.save": "Guardar preferencias"
        },
        ca: {
          "nav.about": "Info",
          "nav.verticals": "Verticals",
          "nav.contact": "Contacte",
          "footer.terms": "Termes",
          "footer.privacy": "Privacitat",
          "footer.cookies": "Cookies",
          "footer.legal": "Legal",
          "card.test": "Estem treballant — tornem aviat.",
          "cookie.prefs": "Preferències de cookies",
          "cmp.title": "Privacitat i cookies",
          "cmp.desc": "Respectem la vostra privacitat. Aquest lloc no utilitza cookies publicitàries ni de seguiment. Les cookies necessàries sempre estan activades per seguretat i funcionament bàsic. Podeu acceptar o rebutjar cookies opcionals.",
          "cmp.necessary": "Necessàries",
          "cmp.necessary.desc": "Seguretat i funcionament bàsic.",
          "cmp.analytics": "Analítica",
          "cmp.analytics.desc": "Opcional: estadístiques anònimes per millorar el lloc.",
          "cmp.marketing": "Màrqueting",
          "cmp.marketing.desc": "Opcional: personalització i mesura de campanyes.",
          "cmp.reject": "Rebutjar-ho tot",
          "cmp.accept": "Acceptar-ho tot",
          "cmp.save": "Desar preferències"
        },
        eu: {
          "nav.about": "Honi buruz",
          "nav.verticals": "Bertikalak",
          "nav.contact": "Kontaktua",
          "footer.terms": "Bald.",
          "footer.privacy": "Prib.",
          "footer.cookies": "Cookies",
          "footer.legal": "Lege-oharra",
          "card.test": "Lanean ari gara — laster itzuliko gara.",
          "cookie.prefs": "Cookie ezarpenak",
          "cmp.title": "Pribatutasuna eta cookieak",
          "cmp.desc": "Zure pribatutasuna errespetatzen dugu. Gune honek ez du publizitateko edo jarraipeneko cookierik erabiltzen. Beharrezko cookieak beti aktibo daude segurtasunerako eta oinarrizko funtziorako. Aukerako cookieak onartu edo baztertu ditzakezu.",
          "cmp.necessary": "Beharrezkoak",
          "cmp.necessary.desc": "Segurtasuna eta oinarrizko funtzionamendua.",
          "cmp.analytics": "Analitika",
          "cmp.analytics.desc": "Aukerakoa: estatistika anonimoak gunea hobetzeko.",
          "cmp.marketing": "Marketina",
          "cmp.marketing.desc": "Aukerakoa: pertsonalizazioa eta kanpainen neurketa.",
          "cmp.reject": "Guztiak baztertu",
          "cmp.accept": "Guztiak onartu",
          "cmp.save": "Hobespenak gorde"
        },
        fr: {
          "nav.about": "À propos",
          "nav.verticals": "Verticales",
          "nav.contact": "Contact",
          "footer.terms": "CGU",
          "footer.privacy": "Conf.",
          "footer.cookies": "Cookies",
          "footer.legal": "Légal",
          "card.test": "Nous travaillons — de retour bientôt.",
          "cookie.prefs": "Préférences cookies",
          "cmp.title": "Confidentialité et cookies",
          "cmp.desc": "Nous respectons votre vie privée. Ce site n’utilise pas de cookies publicitaires ou de suivi. Les cookies nécessaires sont toujours activés pour la sécurité et le fonctionnement de base. Vous pouvez accepter ou refuser les cookies optionnels.",
          "cmp.necessary": "Nécessaires",
          "cmp.necessary.desc": "Sécurité et fonctionnement de base.",
          "cmp.analytics": "Analyse",
          "cmp.analytics.desc": "Optionnel : statistiques anonymes pour améliorer le site.",
          "cmp.marketing": "Marketing",
          "cmp.marketing.desc": "Optionnel : personnalisation et mesure de campagne.",
          "cmp.reject": "Tout refuser",
          "cmp.accept": "Tout accepter",
          "cmp.save": "Enregistrer les préférences"
        },
        ar: {
          "nav.about": "حول",
          "nav.verticals": "القطاعات",
          "nav.contact": "تواصل",
          "footer.terms": "الشروط",
          "footer.privacy": "الخصوصية",
          "footer.cookies": "الكوكيز",
          "footer.legal": "قانوني",
          "card.test": "نعمل على ذلك — نعود قريبًا.",
          "cookie.prefs": "تفضيلات الكوكيز",
          "cmp.title": "الخصوصية وملفات تعريف الارتباط",
          "cmp.desc": "نحن نحترم خصوصيتك. هذا الموقع لا يستخدم ملفات تعريف ارتباط إعلانية أو للتتبع. ملفات تعريف الارتباط الضرورية تكون مفعّلة دائمًا للأمان والوظائف الأساسية. يمكنك قبول أو رفض الملفات الاختيارية.",
          "cmp.necessary": "ضرورية",
          "cmp.necessary.desc": "الأمان والوظائف الأساسية.",
          "cmp.analytics": "تحليلات",
          "cmp.analytics.desc": "اختياري: إحصاءات مجهولة لتحسين الموقع.",
          "cmp.marketing": "تسويق",
          "cmp.marketing.desc": "اختياري: تخصيص وقياس الحملات.",
          "cmp.reject": "رفض الكل",
          "cmp.accept": "قبول الكل",
          "cmp.save": "حفظ الإعدادات"
        },
        ru: {
          "nav.about": "О нас",
          "nav.verticals": "Вертикали",
          "nav.contact": "Контакты",
          "footer.terms": "Усл.",
          "footer.privacy": "Конф.",
          "footer.cookies": "Cookies",
          "footer.legal": "Право",
          "card.test": "Мы работаем — скоро вернёмся.",
          "cookie.prefs": "Настройки cookies",
          "cmp.title": "Конфиденциальность и cookies",
          "cmp.desc": "Мы уважаем вашу конфиденциальность. Этот сайт не использует рекламные или отслеживающие cookies. Необходимые cookies всегда включены для безопасности и базовой работы. Вы можете принять или отклонить необязательные cookies.",
          "cmp.necessary": "Необходимые",
          "cmp.necessary.desc": "Безопасность и базовая функциональность.",
          "cmp.analytics": "Аналитика",
          "cmp.analytics.desc": "Необязательно: анонимная статистика для улучшения сайта.",
          "cmp.marketing": "Маркетинг",
          "cmp.marketing.desc": "Необязательно: персонализация и измерение кампаний.",
          "cmp.reject": "Отклонить все",
          "cmp.accept": "Принять все",
          "cmp.save": "Сохранить настройки"
        },
        hi: {
          "nav.about": "परिचय",
          "nav.verticals": "वर्टिकल्स",
          "nav.contact": "संपर्क",
          "footer.terms": "शर्तें",
          "footer.privacy": "गोपनीयता",
          "footer.cookies": "Cookies",
          "footer.legal": "कानूनी",
          "card.test": "हम काम कर रहे हैं — जल्द वापस आएँगे।",
          "cookie.prefs": "कुकी प्राथमिकताएँ",
          "cmp.title": "गोपनीयता और कुकीज़",
          "cmp.desc": "हम आपकी गोपनीयता का सम्मान करते हैं। यह साइट विज्ञापन या ट्रैकिंग कुकीज़ का उपयोग नहीं करती। सुरक्षा और मूल कार्यक्षमता के लिए आवश्यक कुकीज़ हमेशा चालू रहती हैं। आप वैकल्पिक कुकीज़ स्वीकार या अस्वीकार कर सकते हैं।",
          "cmp.necessary": "आवश्यक",
          "cmp.necessary.desc": "सुरक्षा और मूल कार्यक्षमता।",
          "cmp.analytics": "विश्लेषण",
          "cmp.analytics.desc": "वैकल्पिक: साइट सुधार के लिए अनाम आँकड़े।",
          "cmp.marketing": "मार्केटिंग",
          "cmp.marketing.desc": "वैकल्पिक: वैयक्तिकरण और अभियान मापन।",
          "cmp.reject": "सभी अस्वीकार करें",
          "cmp.accept": "सभी स्वीकार करें",
          "cmp.save": "प्राथमिकताएँ सहेजें"
        }
      };

      const RTL_LANGS = new Set(["ar"]);
      const DEFAULT_LANG = "en";
      const storageKey = "mx_lang";

      // ✅ NEW: Detect preferred language from the browser (first-visit only)
      function detectBrowserLang(){
        const supported = new Set(Object.keys(I18N));
        const prefs = (Array.isArray(navigator.languages) && navigator.languages.length)
          ? navigator.languages
          : [navigator.language || navigator.userLanguage || DEFAULT_LANG];

        for (const raw of prefs){
          if (!raw) continue;
          const base = String(raw).toLowerCase().slice(0,2);
          if (supported.has(base)) return base;
        }
        return null;
      }

      // ✅ Updated: storage -> browser -> fallback (applies to ALL languages)
      function getLang(){
        const saved = localStorage.getItem(storageKey);
        if (saved && I18N[saved]) return saved;

        const detected = detectBrowserLang();
        if (detected) return detected;

        return DEFAULT_LANG;
      }

      function setLang(lang){ localStorage.setItem(storageKey, lang); }

      const POOL_LATIN = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      const POOL_CYR   = "АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЫЭЮЯ0123456789";
      const POOL_DEV   = "अआइईउऊएऐओऔकखगघचछजझटठडढतथदधनपफबभमयरलवशषसह०१२३४५६७८९";
      const POOL_CJK   = "的一是在不了有人这中大为上个国我以要他时来用们生到作地于出就分对成会可主发年动同工也能下过子说产种面而方后多定行学法所民得经";
      const POOL_AR    = "ابتثجحخدذرزسشصضطظعغفقكلمنهوي٠١٢٣٤٥٦٧٨٩";

      function poolForLang(lang){
        if (lang === "ru") return POOL_CYR;
        if (lang === "hi") return POOL_DEV;
        if (lang === "zh") return POOL_CJK;
        if (lang === "ar") return POOL_AR;
        return POOL_LATIN;
      }

      function scrambleSmart(el, finalText, durationMs, lang){
        const base = String(finalText ?? "");
        const pool = poolForLang(lang);
        const isArabic = (lang === "ar");

        const start = performance.now();
        const tick = (t) => {
          const p = Math.min(1, (t - start) / durationMs);
          const reveal = Math.floor(p * base.length);

          if (isArabic){
            const shown = base.slice(0, reveal);
            const hidden = base.slice(reveal).replace(/[^\s]/g, " ");
            el.textContent = shown + hidden;
            if (p < 1) requestAnimationFrame(tick);
            else el.textContent = base;
            return;
          }

          let out = "";
          for (let i = 0; i < base.length; i++){
            const c = base[i];
            if (i < reveal) { out += c; continue; }
            if (c === " ") { out += " "; continue; }
            if (/[\.\,\!\?\:\;\-\—\–\(\)\[\]\/\&\+%#@€$£"']/.test(c)) { out += c; continue; }
            out += pool[(Math.random() * pool.length) | 0];
          }
          el.textContent = out;

          if (p < 1) requestAnimationFrame(tick);
          else el.textContent = base;
        };
        requestAnimationFrame(tick);
      }

      function applyLang(lang){
        document.body.classList.add("is-i18n-switching");

        try{
          const dict = I18N[lang] || I18N[DEFAULT_LANG];

          const html = document.documentElement;
          html.lang = lang;
          html.dir = RTL_LANGS.has(lang) ? "rtl" : "ltr";

          const switchEl = document.getElementById("lang-switch");
          switchEl?.classList.remove("is-open");
          switchEl?.classList.remove("open-right");

          const railEl = document.getElementById("lang-rail");
          if (railEl){
            railEl.querySelectorAll(".lang-pill").forEach(btn => {
              const l = btn.getAttribute("data-lang");
              btn.hidden = (l === lang);
            });
            railEl.scrollLeft = 0;
          }

          const nodes = Array.from(document.querySelectorAll("[data-i18n]"));
          nodes.forEach(el => el.classList.add("mx-i18n-out"));

          setTimeout(() => {
            nodes.forEach(el => {
              const key = el.getAttribute("data-i18n");
              if (!key) return;
              const val = dict[key] ?? I18N[DEFAULT_LANG][key];
              if (typeof val !== "string") return;

              scrambleSmart(el, val, 220, lang);

              el.classList.remove("mx-i18n-out");
              el.classList.add("mx-i18n-in");
            });

            const gear = document.getElementById("cookiePreferencesGear");
            if (gear){
              const tip = dict["cookie.prefs"] ?? I18N[DEFAULT_LANG]["cookie.prefs"];
              gear.setAttribute("data-tip", tip);
              gear.setAttribute("aria-label", tip);
            }

            setTimeout(() => nodes.forEach(el => el.classList.remove("mx-i18n-in")), 220);
          }, 160);

        } finally {
          setTimeout(() => document.body.classList.remove("is-i18n-switching"), 260);
        }
      }

      window.__mxApplyLang = applyLang;
      applyLang(getLang());

      (function(){
        const rail = document.getElementById("lang-rail");
        if (!rail) return;

        const isTouch = ("ontouchstart" in window) || (navigator.maxTouchPoints > 0);

        const TAP_MOVE_PX = 14;
        const TAP_SCROLL_PX = 6;

        let startX = 0, startY = 0, startScroll = 0;
        let dragging = false;
        let pressedBtn = null;

        function ptFromTouch(t){ return { x: t.clientX, y: t.clientY }; }

        rail.addEventListener("touchstart", (e) => {
          const targetBtn = e.target && e.target.closest ? e.target.closest(".lang-pill") : null;
          pressedBtn = targetBtn && rail.contains(targetBtn) ? targetBtn : null;

          if (!e.touches || e.touches.length === 0) return;
          const p = ptFromTouch(e.touches[0]);
          startX = p.x;
          startY = p.y;
          startScroll = rail.scrollLeft;
          dragging = false;

          if (pressedBtn){
            e.preventDefault();
          }
        }, { passive:false });

        rail.addEventListener("touchmove", (e) => {
          if (!e.touches || e.touches.length === 0) return;

          const p = ptFromTouch(e.touches[0]);
          const dx = Math.abs(p.x - startX);
          const dy = Math.abs(p.y - startY);
          const ds = Math.abs(rail.scrollLeft - startScroll);

          if (dx > TAP_MOVE_PX || dy > TAP_MOVE_PX || ds > TAP_SCROLL_PX){
            dragging = true;
          }
        }, { passive:true });

        rail.addEventListener("touchend", (e) => {
          if (dragging){ pressedBtn = null; return; }

          let btn = pressedBtn;

          if (!btn){
            const ct = e.changedTouches && e.changedTouches[0];
            if (ct){
              const p = ptFromTouch(ct);
              const el = document.elementFromPoint(p.x, p.y);
              const maybe = el && el.closest ? el.closest(".lang-pill") : null;
              if (maybe && rail.contains(maybe)) btn = maybe;
            }
          }

          if (!btn || btn.hidden){ pressedBtn = null; return; }

          e.preventDefault();
          e.stopPropagation();

          const lang = btn.getAttribute("data-lang") || DEFAULT_LANG;
          setLang(lang);
          window.__mxApplyLang(lang);

          btn.blur();
          if (document.activeElement && document.activeElement.blur) document.activeElement.blur();

          pressedBtn = null;
        }, { passive:false });

        rail.addEventListener("touchcancel", () => {
          dragging = false;
          pressedBtn = null;
        }, { passive:true });

        rail.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();
        }, true);

        if (!isTouch){
          let downX = 0, downY = 0;
          let pDragging = false;

          rail.addEventListener("pointerdown", (e) => {
            const btn = e.target && e.target.closest ? e.target.closest(".lang-pill") : null;
            if (btn) e.preventDefault();
            downX = e.clientX; downY = e.clientY;
            pDragging = false;
          }, { passive:false });

          rail.addEventListener("pointermove", (e) => {
            if (Math.abs(e.clientX - downX) > 10 || Math.abs(e.clientY - downY) > 10) pDragging = true;
          }, { passive:true });

          rail.addEventListener("pointerup", (e) => {
            if (pDragging) return;

            const el = document.elementFromPoint(e.clientX, e.clientY);
            const btn = el && el.closest ? el.closest(".lang-pill") : null;
            if (!btn || !rail.contains(btn) || btn.hidden) return;

            const lang = btn.getAttribute("data-lang") || DEFAULT_LANG;
            setLang(lang);
            window.__mxApplyLang(lang);

            btn.blur();
            if (document.activeElement && document.activeElement.blur) document.activeElement.blur();
          }, { passive:true });
        }
      })();

    })();

    (function(){
      const switchEl = document.getElementById('lang-switch');
      const railEl   = document.getElementById('lang-rail');
      if (!switchEl || !railEl) return;

      let openTimer = null;
      let closeTimer = null;
      let locked = false;

      const OPEN_DELAY_MS  = 500;
      const CLOSE_DELAY_MS = 3000;

      let firstOpen = true;

      function clearTimers(){
        if (openTimer)  { clearTimeout(openTimer);  openTimer = null; }
        if (closeTimer) { clearTimeout(closeTimer); closeTimer = null; }
      }

      function ensureStartVisibleOnce(){
        if (!firstOpen) return;
        railEl.scrollLeft = 0;
        firstOpen = false;
      }

      function resetShift(){
        railEl.style.setProperty('--rail-shift', '0px');
      }

      function clampRailIntoViewport(){
        const vw = window.innerWidth || document.documentElement.clientWidth;
        const margin = 8;

        resetShift();

        const rect = railEl.getBoundingClientRect();
        let shift = 0;

        if (rect.left < margin){
          shift = (margin - rect.left);
        } else if (rect.right > (vw - margin)){
          shift = - (rect.right - (vw - margin));
        }

        if (shift !== 0){
          railEl.style.setProperty('--rail-shift', `${Math.round(shift)}px`);
        }
      }

      function placeRailSmart(){
        switchEl.classList.remove('open-right');
        resetShift();

        const vw = window.innerWidth || document.documentElement.clientWidth;
        const margin = 8;

        let rect = railEl.getBoundingClientRect();

        if (rect.left < -margin){
          switchEl.classList.add('open-right');
          rect = railEl.getBoundingClientRect();
        }

        if (rect.right > vw + margin){
          switchEl.classList.remove('open-right');
        }

        clampRailIntoViewport();
      }

      function openRail(){
        const y = window.scrollY || document.documentElement.scrollTop || 0;
        requestAnimationFrame(() => window.scrollTo(0, y));

        switchEl.classList.add('is-open');

        requestAnimationFrame(() => {
          ensureStartVisibleOnce();
          placeRailSmart();
        });
      }

      function closeRail(){
        locked = false;
        switchEl.classList.remove('is-open');
        switchEl.classList.remove('open-right');
        resetShift();
      }

      function scheduleOpen(){
        clearTimers();
        openTimer = setTimeout(() => openRail(), OPEN_DELAY_MS);
      }
      function scheduleClose(){
        clearTimers();
        closeTimer = setTimeout(() => closeRail(), CLOSE_DELAY_MS);
      }

      switchEl.addEventListener('pointerenter', () => {
        if (closeTimer) { clearTimeout(closeTimer); closeTimer = null; }
        if (switchEl.classList.contains('is-open')) return;
        scheduleOpen();
      });

      switchEl.addEventListener('pointerleave', () => {
        if (!switchEl.classList.contains('is-open')) { clearTimers(); return; }
        if (locked) return;
        scheduleClose();
      });

      railEl.addEventListener('pointerenter', () => {
        locked = true;
        clearTimers();
        openRail();
      });

      railEl.addEventListener('pointerleave', () => {
        locked = false;
        scheduleClose();
      });

      const trigger = switchEl.querySelector('.lang-trigger');
      let _touchHandled = false;

      function toggleRail(){
        clearTimers();
        if (switchEl.classList.contains('is-open')) closeRail();
        else openRail();

        trigger?.blur();
        if (document.activeElement && document.activeElement.blur) document.activeElement.blur();
      }

      trigger?.addEventListener('touchstart', (e) => {
        _touchHandled = true;
        e.preventDefault();
        toggleRail();
        setTimeout(() => { _touchHandled = false; }, 450);
      }, { passive: false });

      trigger?.addEventListener('click', (e) => {
        if (_touchHandled) return;
        e.preventDefault();
        toggleRail();
      });

      window.addEventListener('resize', () => {
        if (!switchEl.classList.contains('is-open')) return;
        requestAnimationFrame(() => placeRailSmart());
      });
    })();

    (function(){
      const v = document.getElementById('services');
      if (!v) return;

      function setOpen(isOpen){
        v.classList.toggle('is-open', isOpen);
        v.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      }
      function isOpen(){ return v.classList.contains('is-open'); }

      // Toggle on click of the trigger (not on link clicks inside menu)
      v.addEventListener('click', (e) => {
        const a = e.target.closest('a');
        if (a) return; // let link navigate normally
        e.preventDefault();
        e.stopPropagation();
        setOpen(!isOpen());
      });

      // Close when clicking outside — but use pointerdown so it fires before click
      document.addEventListener('pointerdown', (e) => {
        if (!v.contains(e.target)) setOpen(false);
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') setOpen(false);
      });
    })();

    /* ── Video Background: full duration, 3s black, random third ── */
    (function(){
      const wrap  = document.getElementById('mx-video-bg');
      const video = document.getElementById('mx-bg-video');
      if (!wrap || !video) return;

      const THIRDS = ['show-center', 'show-left', 'show-right'];
      let lastThird = -1;

      function randomThird(){
        // Never repeat the same third twice in a row
        let idx;
        do { idx = Math.floor(Math.random() * THIRDS.length); } while (idx === lastThird);
        lastThird = idx;
        return idx;
      }

      function showThird(idx){
        wrap.classList.remove('show-center','show-left','show-right');
        void wrap.offsetWidth;
        wrap.classList.add(THIRDS[idx]);
      }

      function hideVideo(){
        wrap.classList.remove('show-center','show-left','show-right');
      }

      function launch(){
        video.currentTime = 0;
        const p = video.play();
        if (p && p.catch) p.catch(()=>{});
        showThird(randomThird());
      }

      // When video ends: hide → 3s pause → show new third from start
      video.addEventListener('ended', function(){
        hideVideo();
        setTimeout(launch, 3000);
      });

      // Boot
      if (document.readyState === 'complete' || document.readyState === 'interactive'){
        launch();
      } else {
        document.addEventListener('DOMContentLoaded', launch);
      }
    })();

  </script>
</body>
</html>
